<ol class="breadcrumb">
  <li><a ui-sref="main"><i class="fa fa-home fa-fw"></i><span translate>menu.home</span></a></li>
  <li class="active"><i class="fa fa-server fa-fw"></i><span translate>PT.SYSTEM</span></li>
  <li class="active"><i class="fa fa-list fa-fw"></i><span translate>P.SYSTEM_03</span></li>
</ol>

<div ng-controller='System.EventLogCtrl'>
  <div class="panel panel-primary">
    <div class="panel-heading" layout="row" layout-align="space-between center">
      <span translate>P.SYSTEM_03</span>
      <div class="btn-group">
        <button id="refreshBtn" class="btn btn-xs btn-primary " ng-click="refreshGrid()">
          <i class="fa fa-refresh fa-fw"></i>
          <md-tooltip>{{'msg.refresh' | translate}}</md-tooltip>
        </button>
        <button id="exportBtn" class="btn btn-xs btn-primary " ng-click="exportCSV()" privilege="SYSTEM_03:other">
          <i class="fa fa-save fa-fw"></i>
          <md-tooltip>{{'msg.export.csv' | translate}}</md-tooltip>
        </button>
      </div>
    </div>
    <div ag-grid="grid" style="height: 400px; width: 99.9%;" class="ag-fresh"></div>
  </div>
  
  <div layout="column" layout-gt-sm="row" ng-show="detail != null">
    <div class="panel panel-primary" ng-show="userSession.rights['SUPER'].readEnable">
      <div class="panel-heading" translate>sys.eventlog.msg.07</div>
      <div class="panel-body">
        <table class="table">
          <thead>
            <tr>
              <td translate>sys.eventlog.msg.03</td>
              <td>:</td>
              <td>{{ detail.eventType }}</td>
            </tr>
            <tr>
              <td translate>sys.eventlog.msg.02</td>
              <td>:</td>
              <td>{{ detail.eventDate }}</td>
            </tr>
            <tr>
              <td translate>sys.eventlog.msg.05</td>
              <td>:</td>
              <td>{{ detail.status }}</td>
            </tr>
            <tr>
              <td translate>sys.eventlog.msg.04</td>
              <td>:</td>
              <td>{{ detail.message }}</td>
            </tr>
            <tr ng-hide="detail.status == 'SUCCESS'">
              <td translate>sys.eventlog.msg.10</td>
              <td>:</td>
              <td>{{ detail.error }}</td>
            </tr>
            <tr>
              <td translate>sys.eventlog.msg.08</td>
              <td>:</td>
              <td>{{ detail.className }}</td>
            </tr>
            <tr>
              <td translate>sys.eventlog.msg.09</td>
              <td>:</td>
              <td>{{ detail.method }}
              <table class="table">
                  <tbody ng-repeat="p in detail.params">
                    <tr>
                      <td>{{p.index}}</td>
                      <td><json-formatter open="0" json="p.value"></json-formatter></td>
                    </tr>
                  </tbody>
                </table>
              </td>
            </tr>
          </thead>
        </table>
      </div>
    </div>
  </div>
  
</div>
